<template>
    <div id="app">
        <el-container>
            <el-header class="header">
                
            </el-header>
            <el-main class="content">
                <el-row class="row1">
                    <!-- <el-radio :span="2">By ID</el-radio> -->
                    <el-col :span="2"> <el-radio> By ID</el-radio></el-col>
                    <el-col :span="6">
                        <el-input v-model="inputId" placeholder="请输入内容"></el-input>
                    </el-col>
                    <el-col :span="1">&nbsp;</el-col>
                    <el-col :span="2"><el-radio> FullText</el-radio></el-col>
                    <el-col :span="6">
                        <el-input v-model="inputName" placeholder="请输入内容"></el-input>
                    </el-col>
                    <el-col :span="1">&nbsp;</el-col>
                    <el-col :span="2">性别筛选</el-col>
                    <el-col :span="3">
                        <el-select v-model="value" placeholder="请选择">
                            <el-option v-for="item in options" :key="item.value" :label="item.label"
                                :value="item.value">
                            </el-option>
                        </el-select>
                    </el-col>
                </el-row>
                <el-table :data="studentsNewList" style="width:95%" class="eltable1">
                    <el-table-column prop="id" label="ID" width="180">
                    </el-table-column>
                    <el-table-column prop="name" label="姓名" width="180">
                    </el-table-column>
                    <el-table-column prop="sex" label="性别" width="180">
                    </el-table-column>
                    <el-table-column prop="ctime" label="创建时间">
                    </el-table-column>
                </el-table>
            </el-main>
        </el-container>
    </div>
</template>

<script>


export default {
    name: "Table",
    data() {
        return {
            studentsList: [],
            studentsNewList: [],
            inputName: '',
            inputId: null,
            options: [
                { value: 0, label: '全部' },
                { value: 1, label: '男' },
                { value: 2, label: '女' }
            ],
            value: 0
        }
    },


    methods: {
        getStudentsNum() {
            this.$axios.get('http://127.0.0.1:9091/getall').then(result => {
                this.studentsNewList = this.studentsList = result.data
            }).catch(err => {
                console.log(err)
            })
        },
        searchId(keywords) {
            return this.studentsList.filter(item => {
                if (item.id == keywords) {
                    return item
                }
            })
        },
        searchName(keywords) {
            return this.studentsList.filter(item => {
                if (item.name.includes(keywords)) {
                    return item
                }
            })
        },
        searchsex(keywords) {
            return this.studentsList.filter(item => {
                if (item.sex.includes(keywords)) {
                    return item
                }
            })
        },
        numberToSex(num) {
            return num == 1 ? '男' : '女'
        }
    },
    created() {
        this.getStudentsNum()
    },
    watch: {
        inputId: function (val) {
            if (val == '') {
                this.studentsNewList = this.studentsList
            } else {
                this.studentsNewList = this.searchId(val)
            }
        },
        inputName: function (val) {
            if (val == '') {
                this.studentsNewList = this.studentsList
            } else {
                this.studentsNewList = this.searchName(val)
            }
        },
        value: function (val) {
            if (val == 0) {
                this.studentsNewList = this.studentsList
            } else {
                this.studentsNewList = this.searchsex(this.numberToSex(val))
            }
        }
    },
    components: {
       
    }
}


</script>

<style>
* {
    margin: 0;
    padding: 0;
}

#app {
    background: #ccc;
}

.header {
    width: 100%;
    margin-bottom: 30px;
}

.content {
    padding-left: 30px;
}

.row1 {
    height: 60px;
    line-height: 60px;
    margin: 10px 0;
}

.eltable1 {
    overflow: scroll;
}
</style>